(function(e){function t(t){for(var a,l,n=t[0],i=t[1],s=t[2],b=0,u=[];b<n.length;b++)l=n[b],Object.prototype.hasOwnProperty.call(o,l)&&o[l]&&u.push(o[l][0]),o[l]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);d&&d(t);while(u.length)u.shift()();return r.push.apply(r,s||[]),c()}function c(){for(var e,t=0;t<r.length;t++){for(var c=r[t],a=!0,n=1;n<c.length;n++){var i=c[n];0!==o[i]&&(a=!1)}a&&(r.splice(t--,1),e=l(l.s=c[0]))}return e}var a={},o={app:0},r=[];function l(t){if(a[t])return a[t].exports;var c=a[t]={i:t,l:!1,exports:{}};return e[t].call(c.exports,c,c.exports,l),c.l=!0,c.exports}l.m=e,l.c=a,l.d=function(e,t,c){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:c})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var c=Object.create(null);if(l.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(c,a,function(t){return e[t]}.bind(null,a));return c},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],i=n.push.bind(n);n.push=t,n=n.slice();for(var s=0;s<n.length;s++)t(n[s]);var d=i;r.push([0,"chunk-vendors"]),c()})({0:function(e,t,c){e.exports=c("56d7")},"1e88":function(e,t,c){},"56d7":function(e,t,c){"use strict";c.r(t);c("a79d");var a=c("8bbf"),o=c("cebe"),r=c.n(o);const l={class:"navbar bg-primary p-fixed",style:{"z-index":"1000",width:"100%",top:"0"}},n={class:"navbar-section p-2 container grid-sm"},i=Object(a["createVNode"])("span",{class:"navbar-brand text-bold mr-2",style:{color:"#fff!important"}},"知乎日报",-1),s=Object(a["createTextVNode"])("Home"),d=Object(a["createTextVNode"])("About"),b=Object(a["createVNode"])("span",{style:{"flex-grow":"1"}},null,-1),u=Object(a["createVNode"])("div",{id:"navbar-item",class:"d-flex"},null,-1),p={class:"container grid-sm px-0"};function m(e,t){const c=Object(a["resolveComponent"])("router-link"),o=Object(a["resolveComponent"])("router-view");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])("div",l,[Object(a["createVNode"])("div",n,[i,Object(a["createVNode"])(c,{to:"/",class:"btn btn-link",style:{color:"#fff!important"}},{default:Object(a["withCtx"])(()=>[s]),_:1}),Object(a["createVNode"])(c,{to:"/about",class:"btn btn-link",style:{color:"#fff!important"}},{default:Object(a["withCtx"])(()=>[d]),_:1}),b,u])]),Object(a["createVNode"])("div",p,[Object(a["createVNode"])(o,null,{default:Object(a["withCtx"])(({Component:t})=>[(Object(a["openBlock"])(),Object(a["createBlock"])(a["KeepAlive"],null,[e.$route.meta.keepAlive?(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(t),{key:e.$route.path})):Object(a["createCommentVNode"])("",!0)],1024)),e.$route.meta.keepAlive?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(t),{key:0}))]),_:1})])],64)}c("c3c0");const O={};O.render=m;var j=O,g=c("6389");c("ddb0");const v={key:1,style:{padding:"16px 16px"}},y={class:"text-bold h3 mb-2",style:{"margin-top":"24px"}},h=Object(a["createVNode"])("div",{class:"modal-overlay"},null,-1),k={class:"modal-container"},f={class:"modal-header"},V=Object(a["createVNode"])("div",{class:"modal-title h5"},"查看历史日报",-1),N={class:"modal-body"},B={class:"modal-footer"};function x(e,t,c,o,r,l){const n=Object(a["resolveComponent"])("loading-circle"),i=Object(a["resolveComponent"])("story-card"),s=Object(a["resolveComponent"])("router-link"),d=Object(a["resolveComponent"])("calendar");return o.loading&&0===o.daily.length?(Object(a["openBlock"])(),Object(a["createBlock"])(n,{key:0})):(Object(a["openBlock"])(),Object(a["createBlock"])("div",v,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(o.daily,e=>(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:e.date},[Object(a["createVNode"])("div",y,Object(a["toDisplayString"])(e.date),1),(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.stories,e=>(Object(a["openBlock"])(),Object(a["createBlock"])(s,{key:e.id,to:"/story/"+e.id,custom:""},{default:Object(a["withCtx"])(({navigate:t})=>[Object(a["createVNode"])(i,{id:e.id,title:e.title,url:e.url,hint:e.hint,image:e.images[0],hue:e.hue,onClick:t},null,8,["id","title","url","hint","image","hue","onClick"])]),_:2},1032,["to"]))),128))],64))),128)),Object(a["withDirectives"])(Object(a["createVNode"])("button",{ref:"loadMoreBtn",class:["btn btn-lg btn-primary d-block my-2",{loading:o.loading}],style:{width:"100%"},disabled:o.loading,onClick:t[1]||(t[1]=(...e)=>o.loadStories&&o.loadStories(...e))},"加载更多",10,["disabled"]),[[a["vShow"],o.daily.length]]),Object(a["createVNode"])("div",{class:["modal modal-sm",{active:o.calendarDialogVisible}]},[h,Object(a["createVNode"])("div",k,[Object(a["createVNode"])("div",f,[Object(a["createVNode"])("button",{class:"btn btn-clear float-right",onClick:t[2]||(t[2]=e=>o.calendarDialogVisible=!1)}),V]),Object(a["createVNode"])("div",N,[Object(a["createVNode"])(d,{onClickDate:o.calendarClick},null,8,["onClickDate"])]),Object(a["createVNode"])("div",B,[Object(a["createVNode"])("button",{class:"btn btn-primary",onClick:t[3]||(t[3]=e=>o.calendarDialogVisible=!1)},"关闭")])])],2),(Object(a["openBlock"])(),Object(a["createBlock"])(a["Teleport"],{to:"#navbar-item"},["/"===e.$route.path?(Object(a["openBlock"])(),Object(a["createBlock"])("button",{key:0,class:"btn btn-link",style:{color:"#fff!important"},onClick:t[4]||(t[4]=e=>o.calendarDialogVisible=!0)},"查看历史日报")):Object(a["createCommentVNode"])("",!0)]))]))}const S={class:"card mb-2 c-hand"},C={class:"card-body"},D={class:"card-subtitle text-gray pr-1"};function w(e,t,c,o,r,l){return Object(a["openBlock"])(),Object(a["createBlock"])("div",S,[Object(a["createVNode"])("div",C,[Object(a["createVNode"])("div",{class:"float-right s-rounded",style:{"background-image":`url(${c.image})`,width:"54px",height:"54px"}},null,4),Object(a["createVNode"])("div",null,[Object(a["createVNode"])("div",{class:"card-title h5 text-ellipsis pr-1",title:c.title},Object(a["toDisplayString"])(c.title),9,["title"]),Object(a["createVNode"])("div",D,Object(a["toDisplayString"])(c.hint),1)])])])}var A={props:{id:Number,title:String,url:String,hint:String,image:String,hue:String}};A.render=w;var L=A;const M={style:{margin:"32px 0"}},H=Object(a["createVNode"])("div",{class:"loading loading-lg my-2"},null,-1),$=Object(a["createVNode"])("div",{class:"text-center text-primary"},[Object(a["createVNode"])("small",null,"Loading")],-1);function T(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])("div",M,[H,$])}const F={};F.render=T;var _=F;const q={class:"calendar"},P={class:"calendar-nav navbar"},E={class:"navbar-primary"},I={class:"calendar-container"},z={class:"calendar-header"},R={class:"calendar-body"},Y=Object(a["createVNode"])("button",{class:"date-item disabled"},null,-1),W=Object(a["createVNode"])("button",{class:"date-item disabled"},null,-1);function U(e,t,c,o,r,l){const n=Object(a["resolveComponent"])("mdi");return Object(a["openBlock"])(),Object(a["createBlock"])("div",q,[Object(a["createVNode"])("div",P,[Object(a["createVNode"])("button",{class:"btn btn-action btn-link btn-lg",onClick:t[1]||(t[1]=(...e)=>o.prevMonth&&o.prevMonth(...e))},[Object(a["createVNode"])(n,{color:"#3b4351",icon:"M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z"},null,8,["icon"])]),Object(a["createVNode"])("div",E,Object(a["toDisplayString"])(o.header),1),Object(a["createVNode"])("button",{class:"btn btn-action btn-link btn-lg",onClick:t[2]||(t[2]=(...e)=>o.nextMonth&&o.nextMonth(...e))},[Object(a["createVNode"])(n,{color:"#3b4351",icon:"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"},null,8,["icon"])])]),Object(a["createVNode"])("div",I,[Object(a["createVNode"])("div",z,[(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],(e,t)=>Object(a["createVNode"])("div",{key:t,class:"calendar-date"},Object(a["toDisplayString"])(e),1)),64))]),Object(a["createVNode"])("div",R,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(o.firstWeekly,e=>(Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:e,class:"calendar-date prev-month"},[Y]))),128)),(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(o.lastDay,e=>(Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:e,class:"calendar-date"},[Object(a["createVNode"])("button",{class:"date-item",onClick:t=>o.clickDate(e)},Object(a["toDisplayString"])(e),9,["onClick"])]))),128)),(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(6-o.lastWeekly,e=>(Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:e,class:"calendar-date next-month"},[W]))),128))])])])}function Z(e,t,c,o,r,l){return Object(a["openBlock"])(),Object(a["createBlock"])("svg",{fill:c.color,width:o.size,height:o.size,viewBox:"0 0 24 24"},[Object(a["createVNode"])("path",{d:c.icon},null,8,["d"])],8,["fill","width","height"])}var Q={props:{color:String,icon:String,xSmall:{type:Boolean,default:!1},small:{type:Boolean,default:!1},medium:{type:Boolean,default:!1},large:{type:Boolean,default:!1},xLarge:{type:Boolean,default:!1}},setup(e){return{size:Object(a["computed"])(()=>[24,12,16,28,36,40][["xSmall","small","medium","large","xLarge"].map(t=>e[t]).indexOf(!0)+1])}}};Q.render=Z;var G=Q,J={components:{Mdi:G},props:{year:{type:Number,default:()=>(new Date).getFullYear()},month:{type:Number,default:()=>(new Date).getMonth()},day:{type:Number,default:()=>(new Date).getDate()}},setup(e,t){const c=Object(a["ref"])(e.year),o=Object(a["ref"])(e.month),r=Object(a["ref"])(e.day),l=new Date(c.value,o.value,r.value),n=()=>{c.value=l.getFullYear(),o.value=l.getMonth(),r.value=l.getDate()},i=Object(a["computed"])(()=>`${c.value} 年 ${o.value+1} 月`),s=Object(a["computed"])(()=>new Date(c.value,o.value+1,0).getDate()),d=Object(a["computed"])(()=>new Date(c.value,o.value,1).getDay()),b=Object(a["computed"])(()=>new Date(c.value,o.value+1,0).getDay());Object(a["watch"])(c,e=>{t.emit("update:year",e),l.setFullYear(e),n()}),Object(a["watch"])(o,e=>{t.emit("update:month",e),l.setMonth(e),n()}),Object(a["watch"])(r,e=>{t.emit("update:day",e),l.setDate(e),n()});const u=()=>o.value--,p=()=>o.value++,m=e=>t.emit("clickDate",new Date(c.value,o.value,e));return{date:l,prevMonth:u,nextMonth:p,header:i,lastDay:s,firstWeekly:d,lastWeekly:b,clickDate:m}}};J.render=U;var K=J,X={components:{StoryCard:L,LoadingCircle:_,Calendar:K},setup(){const{proxy:e}=Object(a["getCurrentInstance"])(),t=Object(a["reactive"])([]),c=Object(a["ref"])(!1),o=Object(a["ref"])(new Date),r=Object(a["ref"])(null),l=Object(a["ref"])(!1),n=async()=>{c.value=!0;const a=new Date(o.value.getTime()+864e5),r=e=>e.toString().padStart(2,0),l=await e.$http.get("news/before/"+(a.getFullYear()+r(a.getMonth()+1)+r(a.getDate())));t.push({date:`${o.value.getFullYear()} 年 ${o.value.getMonth()+1} 月 ${o.value.getDate()} 日`,stories:l.data.stories}),o.value.setDate(o.value.getDate()-1),c.value=!1},i=e=>{e.getTime()>Date.now()||(o.value=e,l.value=!1,t.length=0,n())};return Object(a["onMounted"])(()=>{n()}),{loading:c,daily:t,nextLoadDate:o,loadStories:n,loadMoreBtn:r,calendarDialogVisible:l,calendarClick:i}}};X.render=x;var ee=X;const te={style:{padding:"16px 16px"}},ce=Object(a["createVNode"])("h4",null,"关于",-1),ae=Object(a["createVNode"])("p",null,"Vue 3 试水项目，知乎日报网页版。",-1),oe=Object(a["createVNode"])("p",null,[Object(a["createTextVNode"])("API 文档来自"),Object(a["createVNode"])("a",{href:"https://www.jianshu.com/p/ee556871da51",target:"_blank"},"知乎日报 API 分析"),Object(a["createTextVNode"])("，本项目与知乎无关。")],-1),re=Object(a["createVNode"])("p",null,[Object(a["createVNode"])("a",{href:"https://github.com/TransparentLC/vue3-zhihu-daily",target:"_blank"},"GitHub 仓库")],-1);function le(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])("div",te,[ce,ae,oe,re])}const ne={};ne.render=le;var ie=ne;const se={class:"text-bold h4 text-light"},de={class:"text-tiny text-light text-right",style:{opacity:".7"}},be={style:{padding:"0 16px"}},ue=Object(a["createVNode"])("div",{class:"modal-overlay"},null,-1),pe={class:"modal-container"},me={class:"modal-header"},Oe=Object(a["createVNode"])("div",{class:"modal-title h5"},"评论",-1),je={class:"modal-body"},ge={class:"text-bold text-large my-2"},ve={class:"text-bold text-large my-2"},ye={class:"modal-footer"},he={class:"btn btn-sm bg-primary d-flex ml-1",style:{"align-items":"center"}},ke={class:"ml-1"},fe={class:"ml-1"};function Ve(e,t,c,o,r,l){const n=Object(a["resolveComponent"])("loading-circle"),i=Object(a["resolveComponent"])("question"),s=Object(a["resolveComponent"])("comment"),d=Object(a["resolveComponent"])("mdi");return o.loading?(Object(a["openBlock"])(),Object(a["createBlock"])(n,{key:0})):(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:1},[Object(a["createVNode"])("div",{style:{height:"320px","background-image":`url(${o.image})`,"background-position":"center","background-size":"cover"},class:"p-relative"},[Object(a["createVNode"])("div",{style:{bottom:0,padding:"1em","padding-top":"3em",background:"linear-gradient(rgba(0,0,0,0),rgba(0,0,0,.5),rgba(0,0,0,.7))",width:"100%"},class:"p-absolute"},[Object(a["createVNode"])("div",se,Object(a["toDisplayString"])(o.title),1),Object(a["createVNode"])("div",de,Object(a["toDisplayString"])(o.credit),1)],4)],4),Object(a["createVNode"])("div",be,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(o.questions,(e,t)=>(Object(a["openBlock"])(),Object(a["createBlock"])(i,{key:t,title:e.title,author:e.author,bio:e.bio,avatar:e.avatar,origin:e.origin,discuss:e.discuss,content:e.content},null,8,["title","author","bio","avatar","origin","discuss","content"]))),128))]),Object(a["createVNode"])("div",{class:["modal",{active:o.commentDialog.visible}]},[ue,Object(a["createVNode"])("div",pe,[Object(a["createVNode"])("div",me,[Object(a["createVNode"])("button",{class:"btn btn-clear float-right",onClick:t[1]||(t[1]=e=>o.commentDialog.visible=!1)}),Oe]),Object(a["createVNode"])("div",je,[o.commentDialog.loading?(Object(a["openBlock"])(),Object(a["createBlock"])(n,{key:0})):(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:1},[Object(a["createVNode"])("div",ge,Object(a["toDisplayString"])(o.commentDialog.long.length)+" 条长评",1),(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(o.commentDialog.long,e=>(Object(a["openBlock"])(),Object(a["createBlock"])(s,{key:e.id,id:e.id,author:e.author,content:e.content,avatar:e.avatar,time:e.time,likes:e.likes,reply:e.reply},null,8,["id","author","content","avatar","time","likes","reply"]))),128)),Object(a["createVNode"])("div",ve,Object(a["toDisplayString"])(o.commentDialog.short.length)+" 条短评",1),(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(o.commentDialog.short,e=>(Object(a["openBlock"])(),Object(a["createBlock"])(s,{key:e.id,id:e.id,author:e.author,content:e.content,avatar:e.avatar,time:e.time,likes:e.likes,reply:e.reply},null,8,["id","author","content","avatar","time","likes","reply"]))),128))],64))]),Object(a["createVNode"])("div",ye,[Object(a["createVNode"])("button",{class:"btn btn-primary",onClick:t[2]||(t[2]=e=>o.commentDialog.visible=!1)},"关闭")])])],2),(Object(a["openBlock"])(),Object(a["createBlock"])(a["Teleport"],{to:"#navbar-item"},[Object(a["createVNode"])("button",he,[Object(a["createVNode"])(d,{color:"#fff",icon:"M23,10C23,8.89 22.1,8 21,8H14.68L15.64,3.43C15.66,3.33 15.67,3.22 15.67,3.11C15.67,2.7 15.5,2.32 15.23,2.05L14.17,1L7.59,7.58C7.22,7.95 7,8.45 7,9V19A2,2 0 0,0 9,21H18C18.83,21 19.54,20.5 19.84,19.78L22.86,12.73C22.95,12.5 23,12.26 23,12V10M1,21H5V9H1V21Z"},null,8,["icon"]),Object(a["createVNode"])("span",ke,Object(a["toDisplayString"])(o.extra.popularity),1)]),Object(a["createVNode"])("button",{class:"btn btn-sm bg-primary d-flex ml-1",style:{"align-items":"center"},onClick:t[3]||(t[3]=e=>{o.commentDialog.visible=!0,o.loadComment()})},[Object(a["createVNode"])(d,{color:"#fff",icon:"M9,22A1,1 0 0,1 8,21V18H4A2,2 0 0,1 2,16V4C2,2.89 2.9,2 4,2H20A2,2 0 0,1 22,4V16A2,2 0 0,1 20,18H13.9L10.2,21.71C10,21.9 9.75,22 9.5,22V22H9M5,5V7H19V5H5M5,9V11H13V9H5M5,13V15H15V13H5Z"},null,8,["icon"]),Object(a["createVNode"])("span",fe,Object(a["toDisplayString"])(o.extra.comments),1)])]))],64))}c("5319"),c("2b3d");const Ne={class:"text-bold h5",style:{margin:"16px 0"}},Be={key:0,class:"my-2"},xe={key:0,class:"avatar avatar-lg mr-2 bg-gray float-left"},Se={key:1},Ce={class:"text-bold"},De={class:"text-gray text-ellipsis"};function we(e,t,c,o,r,l){return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])("div",Ne,Object(a["toDisplayString"])(c.title),1),c.avatar||c.author||c.bio?(Object(a["openBlock"])(),Object(a["createBlock"])("div",Be,[c.avatar?(Object(a["openBlock"])(),Object(a["createBlock"])("div",xe,[Object(a["createVNode"])("img",{src:c.avatar},null,8,["src"])])):Object(a["createCommentVNode"])("",!0),c.author||c.bio?(Object(a["openBlock"])(),Object(a["createBlock"])("div",Se,[Object(a["createVNode"])("div",Ce,Object(a["toDisplayString"])(c.author),1),Object(a["createVNode"])("div",De,Object(a["toDisplayString"])(c.bio||" "),1)])):Object(a["createCommentVNode"])("",!0)])):Object(a["createCommentVNode"])("",!0),Object(a["createVNode"])("div",{ref:"container",innerHTML:c.content},null,8,["innerHTML"]),c.discuss?(Object(a["openBlock"])(),Object(a["createBlock"])("a",{key:1,href:c.discuss,class:"btn d-block mt-2",style:{"margin-bottom":"24px"},target:"_blank"},"查看知乎讨论",8,["href"])):Object(a["createCommentVNode"])("",!0)],64)}c("13d5");const Ae=new IntersectionObserver(e=>e.reduce((e,t)=>(t.isIntersecting&&e.push(t.target),e),[]).forEach(e=>{const t=new Image,c=e.getAttribute("data-src");t.onload=t.onerror=()=>{e.src=c,e.removeAttribute("data-src"),e.style.cssText="",e.classList.remove("s-rounded")},t.src=c,Ae.unobserve(e)}));var Le={props:{title:String,author:String,bio:String,avatar:String,origin:String,discuss:String,content:String},setup(){const e=Object(a["ref"])(null);let t;return Object(a["onMounted"])(()=>{t=Array.from(e.value.querySelectorAll("img[data-src]")),Object(a["nextTick"])(()=>t.forEach(e=>Ae.observe(e)))}),Object(a["onBeforeUnmount"])(()=>t.forEach(e=>Ae.unobserve(e))),{container:e}}};Le.render=we;var Me=Le;const He={class:"tile my-2"},$e={class:"tile-icon"},Te={class:"avatar bg-gray"},Fe={class:"tile-content"},_e={class:"tile-title d-flex"},qe={class:"text-bold"},Pe=Object(a["createVNode"])("div",{style:{"flex-grow":"1"}},null,-1),Ee={class:"text-gray d-flex",style:{"align-items":"center"}},Ie={class:"ml-1"},ze={class:"tile-subtitle"},Re={style:{"white-space":"pre-wrap"}},Ye={key:0,class:"p-2 s-rounded",style:{"background-color":"#f7f7f7"}},We={class:"text-bold"},Ue={style:{"white-space":"pre-wrap"}},Ze={class:"text-gray"};function Qe(e,t,c,o,r,l){const n=Object(a["resolveComponent"])("mdi");return Object(a["openBlock"])(),Object(a["createBlock"])("div",He,[Object(a["createVNode"])("div",$e,[Object(a["createVNode"])("div",Te,[Object(a["createVNode"])("img",{src:c.avatar},null,8,["src"])])]),Object(a["createVNode"])("div",Fe,[Object(a["createVNode"])("div",_e,[Object(a["createVNode"])("div",qe,Object(a["toDisplayString"])(c.author),1),Pe,Object(a["createVNode"])("div",Ee,[Object(a["createVNode"])(n,{small:"",color:"#bcc3ce",icon:"M23,10C23,8.89 22.1,8 21,8H14.68L15.64,3.43C15.66,3.33 15.67,3.22 15.67,3.11C15.67,2.7 15.5,2.32 15.23,2.05L14.17,1L7.59,7.58C7.22,7.95 7,8.45 7,9V19A2,2 0 0,0 9,21H18C18.83,21 19.54,20.5 19.84,19.78L22.86,12.73C22.95,12.5 23,12.26 23,12V10M1,21H5V9H1V21Z"},null,8,["icon"]),Object(a["createVNode"])("span",Ie,Object(a["toDisplayString"])(c.likes),1)])]),Object(a["createVNode"])("div",ze,[Object(a["createVNode"])("div",Re,Object(a["toDisplayString"])(c.content),1),c.reply.content?(Object(a["openBlock"])(),Object(a["createBlock"])("div",Ye,[Object(a["createVNode"])("span",We,Object(a["toDisplayString"])(c.reply.author)+"：",1),Object(a["createVNode"])("span",Ue,Object(a["toDisplayString"])(c.reply.content),1)])):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])("small",Ze,Object(a["toDisplayString"])(`${c.time.getFullYear()}-${(c.time.getMonth()+1).toString().padStart(2,0)}-${c.time.getDate().toString().padStart(2,0)}`)+" "+Object(a["toDisplayString"])(`${c.time.getHours().toString().padStart(2,0)}:${c.time.getMinutes().toString().padStart(2,0)}:${c.time.getSeconds().toString().padStart(2,0)}`),1)])])}var Ge={components:{Mdi:G},props:{id:Number,author:String,content:String,avatar:String,time:Date,likes:Number,reply:Object}};Ge.render=Qe;var Je=Ge,Ke={components:{LoadingCircle:_,Question:Me,Comment:Je,Mdi:G},setup(){const{proxy:e}=Object(a["getCurrentInstance"])(),t=Object(a["ref"])(!1),c=Object(a["reactive"])([]),o=Object(a["ref"])(""),r=Object(a["ref"])(""),l=Object(a["ref"])(""),n=Object(a["reactive"])({longComments:0,shortComments:0,popularity:0,comments:0}),i=Object(a["reactive"])({visible:!1,loading:!0,loaded:!1,long:[],short:[]}),s=Object(g["useRoute"])().params.id,d=async()=>{t.value=!0;const[a,i]=await Promise.all([e.$http.get("news/"+s),e.$http.get("story-extra/"+s)]);o.value=a.data.title,r.value=a.data.image,l.value=a.data.image_source,n.longComments=i.data.long_comments,n.shortComments=i.data.short_comments,n.popularity=i.data.popularity,n.comments=i.data.comments;const d=(new DOMParser).parseFromString(a.data.body,"text/html");Array.from(d.querySelectorAll(".question")).forEach(e=>{var t,a,o,r,l;const n=null==(t=e.querySelector(".question-title"))?void 0:t.innerText,i=null==(a=e.querySelector(".meta .author"))?void 0:a.innerText.replace(/，$/,""),s=null==(o=e.querySelector(".meta .bio"))?void 0:o.innerText,d=null==(r=e.querySelector(".meta img.avatar"))?void 0:r.src,b=null==(l=e.querySelector(".meta .originUrl"))?void 0:l.href,u=e.querySelector(".view-more");let p;var m;u&&(p=null==(m=u.querySelector("a"))?void 0:m.href,u.parentNode.removeChild(u));const O=e.querySelector(".content");Array.from(O.querySelectorAll("p")).forEach(e=>{e.innerHTML.replace(/&nbsp;/," ").trim()||e.parentNode.removeChild(e)}),Array.from(O.querySelectorAll("img.content-image")).forEach(e=>{const t=e.parentNode,c=t.parentNode;if(e.setAttribute("data-src",e.src),e.src="data:image/gif;base64,R0lGODdhAQABAIAAAPf39wAAACwAAAAAAQABAAACAkQBADs=",e.style.cssText="width:100%;height:240px",e.classList.add("s-rounded","img-responsive"),"p"!==t.tagName){const a=document.createElement("p");a.appendChild(e),c.insertBefore(a,t),c.removeChild(t)}}),Array.from(O.querySelectorAll("a")).forEach(e=>{e.href.match(/^https?:\/\/link\.zhihu\.com\/\?target=/)&&(e.href=decodeURIComponent(new URL(e.href).searchParams.get("target")))}),Array.from(O.querySelectorAll("pre")).forEach(e=>{e.style.overflowY="auto"});const j=O.innerHTML;c.push({title:n,author:i,bio:s,avatar:d,origin:b,discuss:p,content:j})}),t.value=!1},b=async()=>{if(i.loaded)return;i.loading=!0;const[t,c]=await Promise.all([e.$http.get(`./story/${s}/long-comments`),e.$http.get(`./story/${s}/short-comments`)]);i.long=t.data.comments.map(e=>(e.time=new Date(1e3*e.time),e.reply_to?(e.reply=e.reply_to,delete e.reply_to):e.reply={},e)),i.short=c.data.comments.map(e=>(e.time=new Date(1e3*e.time),e.reply_to?(e.reply=e.reply_to,delete e.reply_to):e.reply={},e)),i.loading=!1,i.loaded=!0};return Object(a["onMounted"])(d),{loading:t,questions:c,title:o,image:r,credit:l,extra:n,commentDialog:i,loadComment:b}}};Ke.render=Ve;var Xe=Ke;const et=[{path:"/",component:ee,meta:{keepAlive:!0}},{path:"/about",component:ie,meta:{keepAlive:!0}},{path:"/story/:id(\\d+)",component:Xe}],tt=Object(g["createRouter"])({history:Object(g["createWebHashHistory"])(),routes:et});var ct=tt;const at=Object(a["createApp"])(j);at.config.globalProperties.$http=r.a.create({baseURL:"https://zhihu-daily.transparentlc.workers.dev/api/4/"}),at.use(ct).mount("#app")},6389:function(e,t){e.exports=VueRouter},"8bbf":function(e,t){e.exports=Vue},c3c0:function(e,t,c){"use strict";c("1e88")},cebe:function(e,t){e.exports=axios}});